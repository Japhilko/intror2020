## ---- include=FALSE-----------------------------------------------------------------------------------
knitr::opts_chunk$set(echo = T,message=F,warning = F,cache=F,size="small")
showSolution=F


## ----echo=F-------------------------------------------------------------------------------------------

sysinf <- Sys.info()

if (sysinf["nodename"]=="MAC14077"){
  oldgitpath <- "D:/Daten/GitLab/IntroDataAnalysis/"  
}else{
  oldgitpath <- "D:/gitlab/IntroDataAnalysis/"
}



## ----echo=F,eval=F------------------------------------------------------------------------------------
## library("readstata13")
## dat <- read.dta13("../data/ZA5666_v1-0-0_Stata14.dta")
## dat <- dat[1:100,]
## save(dat,file="../data/ZA5666_v1-0-0_medium.RData")
## 
## datf <- read.dta13("../data/ZA5666_v1-0-0_Stata14.dta",
##                    convert.factors = F)
## 
## datf <- datf[1:100,]
## save(datf,file="../data/ZA5666_v1-0-0_medium_fac.RData")


## ----echo=F,eval=F------------------------------------------------------------------------------------
## library(knitr)
## sched <- xlsx::read.xlsx2("../orga/schedule.xlsx",1)
## dats <- sched[9:15,c(1,4,5)]
## dats <- dats[-which(dats$Part=="Break"),]
## 
## kable(dats,row.names = F)


## ----echo=F,eval=F------------------------------------------------------------------------------------
## load(paste0(oldgitpath,"/data/ZA5666_v1-0-0_medium.RData"))
## load(paste0(oldgitpath,"/data/ZA5666_v1-0-0_medium_fac.RData"))


## ----echo=F,eval=F------------------------------------------------------------------------------------
## library("readstata13")
## gpdat <- read.dta13("../data/ZA5666_v1-0-0_Stata14.dta",
##                     convert.factors = F)


## ----eval=F,echo=F------------------------------------------------------------------------------------
## library(foreign)
## gpdat<-read.dta("https://github.com/Japhilko/RSocialScience/
##               raw/master/data/GPanel.dta",convert.factors = F)


## ----eval=F-------------------------------------------------------------------------------------------
## install.packages("AmesHousing")


## -----------------------------------------------------------------------------------------------------
ames_data <- AmesHousing::make_ames()


## -----------------------------------------------------------------------------------------------------
typeof(ames_data)


## ----eval=F-------------------------------------------------------------------------------------------
## head(names(ames_data))


## ----echo=F-------------------------------------------------------------------------------------------
head(names(ames_data[4:8]))


## -----------------------------------------------------------------------------------------------------
# Transfer data to a `data.frame`:
ames_df <- data.frame(ames_data)


## -----------------------------------------------------------------------------------------------------
nrow(ames_data) # rows
ncol(ames_data) # columns


## ----eval=F-------------------------------------------------------------------------------------------
## head(ames_df) # first lines
## tail(ames_df) # last lines


## -----------------------------------------------------------------------------------------------------
head(ames_df$Lot_Area)

ames_df$Lot_Area[1:6]


## ----eval=F-------------------------------------------------------------------------------------------
## head(ames_df[,5])
## head(ames_df[,"Street"]) # the same result


## -----------------------------------------------------------------------------------------------------
Street <- ames_df$Street
table(Street)


## ----eval=F-------------------------------------------------------------------------------------------
## ames_df[Street=="Grvl",]
## # same result:
## ames_df[Street!="Pave",]


## ----echo=F,eval=F------------------------------------------------------------------------------------
## ames_df[Street=="Grvl",]
## # same result:
## ames_df[Street!="Pave",]


## ----eval=F-------------------------------------------------------------------------------------------
## ames_df[ames_df$Lot_Area>9000,]


## ----echo=F-------------------------------------------------------------------------------------------
knitr::kable(ames_df[ames_df$Lot_Area>9000,4:6],"html")


## -----------------------------------------------------------------------------------------------------
data(airquality)
Ozone <- airquality$Ozone


## ----eval=F-------------------------------------------------------------------------------------------
## subDat <- airquality[Ozone>30,]


## ----eval=F-------------------------------------------------------------------------------------------
## airquality[Ozone>18 & airquality$Month==5,]


## ----echo=F,eval=F------------------------------------------------------------------------------------
## airquality[Ozone>18 & airquality$Month==5,1:4]


## ----eval=F-------------------------------------------------------------------------------------------
## airquality[Ozone>18 | airquality$Month==5,]


## -----------------------------------------------------------------------------------------------------
mean(Ozone)


## -----------------------------------------------------------------------------------------------------
mean(Ozone,na.rm=T)


## -----------------------------------------------------------------------------------------------------
head(is.na(Ozone))


## -----------------------------------------------------------------------------------------------------
which(is.na(Ozone))


## -----------------------------------------------------------------------------------------------------
table(is.na(Ozone))


## ----eval=F,echo=F------------------------------------------------------------------------------------
## install.packages("naniar")


## -----------------------------------------------------------------------------------------------------
# Data Structures, Summaries, and Visualisations 
# for Missing Data
library(naniar) 
vis_miss(airquality)


## ----eval=T-------------------------------------------------------------------------------------------
nrow(airquality)
# list rows of data without missing values 
airq_comp <- airquality[complete.cases(airquality),]
nrow(airq_comp)


## -----------------------------------------------------------------------------------------------------
airq_comp <- na.omit(airquality)
nrow(airq_comp)


## -----------------------------------------------------------------------------------------------------
airq <- airquality 
airq$Ozone[is.na(airq$Ozone)] <-mean(airq$Ozone,na.rm = T)


## -----------------------------------------------------------------------------------------------------
mean(airquality$Ozone, na.rm = T) ; mean(airq$Ozone)
var(airquality$Ozone, na.rm = T)
var(airq$Ozone)


## ----eval=T-------------------------------------------------------------------------------------------
colSums(is.na(airquality))
colSums(is.na(airq))


## ----eval=T-------------------------------------------------------------------------------------------
colnames(airquality)


## ----eval=T-------------------------------------------------------------------------------------------
colnames(airquality)[1] <- "var1"


## ----echo=F-------------------------------------------------------------------------------------------
colnames(airquality)


## ----eval=T-------------------------------------------------------------------------------------------
rownames(airquality)


## -----------------------------------------------------------------------------------------------------
airq2 <- airquality # create a dublette
for (i in 1:ncol(airq)){
  airq2[,i] <- as.character(airq2[,i])
}


## ----eval=F-------------------------------------------------------------------------------------------
## str(airquality)


## ----echo=F-------------------------------------------------------------------------------------------
knitr::include_graphics("figure/str_output_airq.PNG")


## ----eval=T-------------------------------------------------------------------------------------------
str(airq2)


## -----------------------------------------------------------------------------------------------------
apply(airq,2,mean)
apply(airq,2,mean,na.rm=T)


## ----eval=F-------------------------------------------------------------------------------------------
## # the following is possible but doesn`t make sense
## # for this case:
## apply(airq,1,mean)


## -----------------------------------------------------------------------------------------------------
apply(airq,2,var)
apply(airq,2,sd)
apply(X = airq,MARGIN = 2,FUN = range)


## -----------------------------------------------------------------------------------------------------
tapply(airq$Wind, airq$Month,mean)


## ----eval=F,echo=F------------------------------------------------------------------------------------
## # https://github.com/BAAQMD/copydat
## devtools::install_github("BAAQMD/copydat")
## install.packages("questionr")
## devtools::install_github("ThinkR-open/littleboxes") # https://github.com/ThinkR-open/littleboxes

